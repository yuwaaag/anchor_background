<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Master Virtual Studio - Final Secure Version</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; background: #000; }

        /* 1. स्टूडियो बैकग्राउंड लेयर */
        #studio-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            transition: all 1s ease-in-out; z-index: 1;
        }

        /* 3. न्यूज़ मेज (Foreground Desk) */
        #studio-desk {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 42%;
            background-size: contain; background-repeat: no-repeat; background-position: bottom center;
            z-index: 3; transition: all 1s ease-in-out; pointer-events: none;
        }

        /* 4. न्यूज़ ग्राफिक्स (Top Layer) */
        .overlay-layer { position: absolute; width: 100%; height: 100%; z-index: 100; pointer-events: none; }

        .ticker-container { 
            position: absolute; bottom: 20px; left: 2%; width: 96%; height: 75px; 
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px);
            border-radius: 12px; display: flex; align-items: center; overflow: hidden;
            border-bottom: 5px solid #FFD700; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .ticker-label { background: linear-gradient(to right, #ff0000, #990000); color: #fff; padding: 0 25px; font-weight: 900; font-size: 26px; height: 100%; display: flex; align-items: center; }
        .ticker-text { color: #fff; font-size: 32px; flex-grow: 1; overflow: hidden; white-space: nowrap; }
        .ticker-text p { display: inline-block; padding-left: 100%; animation: scroll 20s linear infinite; margin: 0; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        .name-tag { position: absolute; top: 72%; left: 5%; background: #FFD700; color: #000; padding: 10px 30px; font-size: 24px; font-weight: bold; border-radius: 5px; border-left: 10px solid #000; }

        #studio-logo { position: absolute; top: 30px; right: 40px; width: 160px; filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)); }

        /* थीम्स - इमेजेस को डायरेक्ट और स्टेबल रखा है */
        .studio-1 #studio-bg { background-image: url('https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg'); }
        .studio-1 #studio-desk { background-image: url('https://raw.githubusercontent.com/yuwaaag/logo/main/desk1.png'); }

        .studio-2 #studio-bg { background-image: url('https://images.pexels.com/photos/395196/pexels-photo-395196.jpeg'); }
        .studio-2 #studio-desk { background-image: url('https://raw.githubusercontent.com/yuwaaag/logo/main/desk2.png'); }

    </style>
</head>
<body class="studio-1">

    <div id="studio-bg"></div>
    <div id="studio-desk"></div>

    <div class="overlay-layer">
        <img id="studio-logo" src="https://raw.githubusercontent.com/yuwaaag/logo/main/ptnlogo.png">
        <div id="anchor-name" class="name-tag">LOADING...</div>
        <div class="ticker-container">
            <div class="ticker-label">BREAKING</div>
            <div class="ticker-text"><p id="ticker-content">Connecting to News Feed...</p></div>
        </div>
    </div>

    <script>
        const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS5PlH4n2B1wMI-FpWb0udrmm8ZIgr-8G27eb-N8BOR-FvxFKwg_BD7NtpbYtj9_ZY8tgS6bxB6iizu/pub?gid=0&single=true&output=csv'; // अपनी Google Sheet का CSV लिंक यहाँ डालें
        let lastData = "";

        async function updateStudio() {
            try {
                const res = await fetch(`${sheetURL}&cb=${new Date().getTime()}`);
                const data = await res.text();
                if (data === lastData) return;
                lastData = data;

                const lines = data.split('\n');
                const col = lines[0].split(',');

                // EMERGENCY RESET CHECK (Column H - Index 7)
                const emergency = col[7] ? col[7].replace(/"/g, "").trim() : "NORMAL";
                
                if (emergency === "RESET") {
                    document.body.className = "studio-1";
                    document.getElementById('ticker-content').innerText = "तकनीकी सुधार जारी है... कृपया प्रतीक्षा करें।";
                    document.getElementById('anchor-name').innerText = "SYSTEM RESET";
                    return;
                }

                // Normal Updates
                document.getElementById('ticker-content').innerText = col[0].replace(/"/g, ""); // Column A
                document.getElementById('anchor-name').innerText = col[1].replace(/"/g, ""); // Column B

                // Studio Selection (Column G - Index 6)
                const studioNum = col[6] ? col[6].replace(/"/g, "").trim() : "1";
                document.body.className = "studio-" + studioNum;

            } catch (e) { 
                console.log("Syncing Error: ", e); 
            }
        }

        setInterval(updateStudio, 3000);
        updateStudio();
    </script>
</body>
</html>
